<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cricket Score â€” Final Clone</title>
  <style>
    :root{--bg:#0f172a;--card:#0b1220;--accent:#06b6d4;--muted:#94a3b8;--glass:rgba(255,255,255,0.03)}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial; margin:0;min-height:100vh;background:linear-gradient(180deg,#071026 0%, #081427 100%);color:#e6eef6;display:flex;align-items:flex-start;justify-content:center;padding:32px}
    .app{width:960px;max-width:96%;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border-radius:12px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    .top{display:flex;gap:20px;align-items:center}
    .board{flex:1;background:var(--card);padding:18px;border-radius:10px}
    .controls{width:330px;min-width:260px;background:var(--card);padding:18px;border-radius:10px}
    .score-large{font-size:40px;font-weight:700;letter-spacing:0.5px}
    .meta{display:flex;gap:12px;margin-top:8px}
    .meta .item{background:var(--glass);padding:10px;border-radius:8px;min-width:90px;text-align:center}
    .btn-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:14px}
    button{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 12px;border-radius:8px;color:inherit;font-weight:600;cursor:pointer}
    button.positive{border-color:rgba(6,182,212,0.18)}
    button.danger{border-color:rgba(239,68,68,0.18)}
    .small-row{display:flex;gap:8px;margin-top:8px}
    .footer-actions{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
    .muted{color:var(--muted);font-size:13px}
    .hud{display:flex;gap:12px;align-items:center}
    .pill{background:rgba(255,255,255,0.02);padding:6px 10px;border-radius:999px;font-weight:600}
    .current-over{margin-top:10px;font-size:14px;color:#94a3b8}
    input[type=checkbox]{accent-color:#06b6d4; margin-right:4px;}
    @media (max-width:800px){.top{flex-direction:column}.controls{width:100%}}
  </style>
</head>
<body>
  <div class="app" role="application">
    <div class="top">
      <div class="board">
        <div class="hud">
          <div>
            <div class="score-large" id="scoreDisplay">0 / 0</div>
            <div class="muted" id="runsBalls">0 runs in 0 balls</div>
            <div class="current-over" id="currentOver">Current Over: -</div>
          </div>
          <div style="margin-left:auto;text-align:right">
            <div class="pill" id="targetPill" style="display:none">Target: <span id="targetRuns">0</span></div>
            <div class="muted" style="margin-top:6px">Overs: <strong id="oversDisplay">0.0</strong></div>
            <div class="muted">Wickets: <strong id="wicketsDisplay">0</strong></div>
          </div>
        </div>
        <div class="meta">
          <div class="item">
            <div class="muted">Extras</div>
            <div id="extrasDisplay">0</div>
          </div>
          <div class="item">
            <div class="muted">Run Rate</div>
            <div id="rrDisplay">0.00</div>
          </div>
          <div class="item">
            <div class="muted">Required</div>
            <div id="requiredDisplay">-</div>
          </div>
        </div>
        <div style="margin-top:14px">
          <button id="undoBtn">Undo</button>
          <button id="targetBtn">Target mode</button>
        </div>
      </div>

      <div class="controls">
        <div style="font-weight:700;margin-bottom:8px">Controls</div>
        <div class="small-row">
          <input type="checkbox" id="noBallChk"><label for="noBallChk">No Ball</label>
          <input type="checkbox" id="wideChk"><label for="wideChk">Wide</label>
        </div>
        <div class="small-row">
          <button class="positive" data-run="0">0</button>
          <button class="danger" id="wicketBtn">Wicket</button>
        </div>
        <div class="btn-grid">
          <button class="positive" data-run="1">1</button>
          <button class="positive" data-run="2">2</button>
          <button class="positive" data-run="3">3</button>
          <button class="positive" data-run="4">4</button>
          <button class="positive" data-run="5">5</button>
          <button class="positive" data-run="6">6</button>
        </div>
        <div class="footer-actions">
          <button id="resetBtn">Reset All</button>
          <button id="resetOverBtn">Reset Current Over</button>
        </div>
        <div style="margin-top:12px" class="muted">Every ball is a new chance. Play with heart, and the scoreboard will follow.</div>
      </div>
    </div>
  </div>

<script>
const state={runs:0,balls:0,extras:0,wickets:0,history:[],target:null,currentOver:[]};
const el=id=>document.getElementById(id);

function updateUI(){
  el('scoreDisplay').textContent=`${state.runs} / ${state.wickets}`;
  el('runsBalls').textContent=`${state.runs} runs in ${state.balls} balls`;
  el('oversDisplay').textContent=`${Math.floor(state.balls/6)}.${state.balls%6}`;
  el('wicketsDisplay').textContent=state.wickets;
  el('extrasDisplay').textContent=state.extras;
  el('rrDisplay').textContent=state.balls?((state.runs/state.balls)*6).toFixed(2):0;
  el('currentOver').textContent="Current Over: "+(state.currentOver.length?state.currentOver.join(" | "):"-");

  if(state.target){
    el('targetPill').style.display='inline-block';
    el('targetRuns').textContent=state.target.runs;
    const req=state.target.runs-state.runs;
    el('requiredDisplay').textContent=req>0?`${req} left`:'Won';
    if(req<=0){ alert('Batting Team Won The Match'); resetAll(false); }
  }else{ el('targetPill').style.display='none'; el('requiredDisplay').textContent='-'; }
}

function pushHistory(action){ state.history.push(action); }

function addRun(n){
  const isNoBall=el("noBallChk").checked;
  const isWide=el("wideChk").checked;
  let totalRuns=n;
  let overSymbol=n.toString();
  let legal=true;

  if(isNoBall){
    totalRuns+=1;
    state.extras+=1;
    pushHistory({type:'noball', value:totalRuns, ballInc:0, undoable:true});
    overSymbol=(n===0?'0+NB':`NB+${n}`);
    legal=false;
  }else if(isWide){
    totalRuns+=1;
    state.extras+=1;
    pushHistory({type:'wide', value:totalRuns, ballInc:0, undoable:true});
    overSymbol=(n===0?'0+WD':`WD+${n}`);
    legal=false;
  }

  state.runs+=totalRuns;

  if(legal){
    state.balls+=1;
    // Reset current over after 6 legal balls
    if(state.balls%6===1) state.currentOver=[];
  }

  state.currentOver.push(overSymbol);

  el("noBallChk").checked=false;
  el("wideChk").checked=false;

  updateUI();
  checkTargetCondition();
}

function dotBall(){ addRun(0); }

function addWicket(){
  state.balls+=1;
  if(state.balls%6===1) state.currentOver=[];
  state.wickets+=1;
  state.currentOver.push('W');
  pushHistory({type:'wicket', value:1, ballInc:1, undoable:true});
  updateUI();
  checkTargetCondition();
}

function undo(){
  if(!state.history.length){ alert('Nothing to undo'); return; }
  const last=state.history.pop();
  if(!last.undoable){ alert('Cannot undo'); state.history.push(last); return; }

  if(last.type==='run' || last.type==='dot' || last.type==='wicket'){
    state.balls-=last.ballInc;
    if(last.type==='run') state.runs-=last.value;
    else if(last.type==='wicket') state.wickets-=1;
  }else if(last.type==='wide'||last.type==='noball'){
    state.runs-=last.value;
    state.extras-=last.value;
  }

  if(state.balls<0) state.balls=0;
  state.currentOver.pop();
  updateUI();
}

function resetAll(confirmReset=true){
  if(confirmReset && !confirm('Reset scoreboard?')) return;
  state.runs=0; state.balls=0; state.extras=0; state.wickets=0; state.history=[]; state.target=null; state.currentOver=[];
  updateUI();
}

function resetCurrentOver(){ state.currentOver=[]; updateUI(); }

function checkTargetCondition(){
  if(state.target){
    const remainingRuns=state.target.runs-state.runs;
    const maxBalls=state.target.overs?state.target.overs*6:null;
    if(remainingRuns<=0){ alert('Batting Team Won The Match'); resetAll(false); }
    else if(maxBalls && state.balls>=maxBalls){ alert('Bowling Team Won The Match'); resetAll(false); }
  }
}

// Event bindings
document.querySelectorAll('[data-run]').forEach(b=>b.onclick=e=>addRun(Number(e.target.dataset.run)));
el('wicketBtn').onclick=addWicket;
el('undoBtn').onclick=undo;
el('resetBtn').onclick=()=>resetAll(true);
el('resetOverBtn').onclick=resetCurrentOver;

// Target Mode
el('targetBtn').onclick=()=>{
  const runs=prompt("Enter Target Runs:");
  if(!runs || runs<=0){ alert('Enter a valid target'); return; }
  const overs=prompt("Enter Target Overs (optional):");
  state.target={runs:Number(runs), overs:Number(overs)||null};
  updateUI();
};

updateUI();
</script>
</body>
</html>